import {Then, When} from "cucumber";
import {browser, ExpectedConditions} from "protractor";
import {LocateVulnerability} from "../pages/LocateVulnerability";

When(/^I Locate Vulnerability$/, async function() {
    await browser.wait(ExpectedConditions.presenceOf(LocateVulnerability.codeMirrorPane), 20000, 'Failed to load Locate Vulnerability page');

    await LocateVulnerability.clickSourceTreeItem('UserRepository.cs');
    await LocateVulnerability.clickVulnerabilityByLineNumber('53');
});

When(/^I click Next$/, async function() {
    await LocateVulnerability.clickNextButton();
});

Then(/^Stage Completed$/, async function() {
    await browser.wait(ExpectedConditions.elementToBeClickable(LocateVulnerability.continueButton), 10000, 'Continue button not clickable');
});



